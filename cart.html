<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cart — AhamStree</title>
  <meta name="description" content="Your cart — review items before checkout.">
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#b3302a">
  <link rel="stylesheet" href="assets/styles.css" />
</head>
<body>
  <div id="header"></div>

  <main id="content" class="container">
    <h2 style="margin-top:0;">Cart</h2>
    <div id="cart-root" class="card" style="padding:12px;border-radius:12px;">
      <div id="cart-items">Loading…</div>
      <div style="height:12px;"></div>
      <button id="clearBtn" class="btn secondary">Clear cart</button>
    </div>
  </main>

  <div id="footer"></div>

  <script type="module">
    import { renderHeader, renderFooter } from "./assets/ui.js";
    import { showCookieConsent } from "./assets/cookie-consent.js";
    import { loadAnalytics } from "./assets/analytics.js";
    import { getCart, clearCart } from "./assets/cart.js";

    document.getElementById("header").innerHTML = renderHeader("cart");
    document.getElementById("footer").innerHTML = renderFooter();
    showCookieConsent(loadAnalytics);

    const itemsEl = document.getElementById("cart-items");
    const clearBtn = document.getElementById("clearBtn");

    function render() {
      const cart = getCart();
      if (!cart || !cart.length) {
        itemsEl.innerHTML = `<div class="small">Your cart is empty.</div>`;
        return;
      }
      itemsEl.innerHTML = cart.map(item => `
        <div style="display:flex;gap:12px;align-items:center;margin-bottom:8px;">
          <img src="${item.image_url || 'assets/icon-192.png'}" alt="${item.title}" style="width:72px;height:72px;object-fit:cover;border-radius:8px;">
          <div style="flex:1;">
            <div style="font-weight:900;">${item.title}</div>
            <div class="small">Qty: ${item.qty} • ₹${item.price_inr}</div>
          </div>
        </div>
      `).join("");
    }

    clearBtn.onclick = () => {
      clearCart();
      render();
    };

    render();
  </script>
</body>
</html>
